<!DOCTYPE html>
<head>
    <title>Home</title>
    <meta charset="utf-8">
    <link rel="stylesheet" href="css/style.css">
</head>
<body onload="startTime()">
    <p class="clock" id="txt"></p>
    <h2 class="Nyt" id="price">Lataa...</h2>
    <p class="tunti1">+1h</p>
    <h2 class="Seuraava" id="price2">Lataa...</h2>
    <p class="tunti2">+2h</p>
    <h2  class="Seuraava2" id="price3">Lataa...</h2>
    <script type="text/javascript">
        function startTime() {
          const today = new Date();
          let h = today.getHours();
          let m = today.getMinutes();
          let s = today.getSeconds();
          m = checkTime(m);
          s = checkTime(s);
          document.getElementById('txt').innerHTML =  h + ":" + m + ":" + s;
          setTimeout(startTime, 1000);
        }
        
        function checkTime(i) {
          if (i < 10) {i = "0" + i};  // add zero in front of numbers < 10
          return i;
        }
        </script>
    <script type="text/javascript">
        fetch('http://localhost:5500/data/current.json')
            .then((response) => response.json())
            .then((json) => {
                //console.log(json.price)
                const elem = document.getElementById("price")
                
                const hinta = (Math.round((json.price + 0.38) * 100) / 100).toFixed(2);
                elem.innerHTML = hinta;
                if (hinta > 10 || hinta == 10)
                {
                    document.getElementById("price").style.color = "#FF0000";
                }
                if (hinta > 5 && hinta < 10 || hinta == 5)
                {
                    document.getElementById("price").style.color = "#FFB100";
                }
                if (hinta < 5)
                {
                    document.getElementById("price").style.color = "#00B207";
                }
            });
        fetch('http://localhost:5500/data/next.json')
            .then((response) => response.json())
            .then((json) => {
                //console.log(json.price)
                const elem = document.getElementById("price2")

                const hinta2 = (Math.round((json.price + 0.38) * 100) / 100).toFixed(2);
                elem.innerHTML = hinta2;
                if (hinta2 > 10 || hinta2 == 10)
                {
                    document.getElementById("price2").style.color = "#FF0000";
                }
                if (hinta2 > 5 && hinta2 < 10 || hinta2 == 5)
                {
                    document.getElementById("price2").style.color = "#FFB100";
                }
                if (hinta2 < 5)
                {
                    document.getElementById("price2").style.color = "#00B207";
                }
            });
        fetch('http://localhost:5500/data/next2.json')
            .then((response) => response.json())
            .then((json) => {
                //console.log(json.price)
                const elem = document.getElementById("price3")

                const hinta3 = (Math.round((json.price + 0.38) * 100) / 100).toFixed(2);
                elem.innerHTML = hinta3;
                if (hinta3 > 10 || hinta3 == 10)
                {
                    document.getElementById("price3").style.color = "#FF0000";
                }
                if (hinta3 > 5 && hinta3 < 10 || hinta3 == 5)
                {
                    document.getElementById("price3").style.color = "#FFB100";
                }
                if (hinta3 < 5)
                {
                    document.getElementById("price3").style.color = "#00B207";
                }
            });
    </script>
</body>
</html>